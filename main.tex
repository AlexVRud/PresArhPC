\documentclass[10pt,pdf]{beamer}
\usetheme{Madrid}

\usepackage[T2A]{fontenc}
\usepackage[cp1251]{inputenc}
\usepackage[russian]{babel}
\usepackage[warn]{mathtext}          % русские буквы в формулах, с предупреждением
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}

\usepackage{subfigure}

\usepackage{tikz}
\usetikzlibrary{calc}
\usetikzlibrary{arrows}
\usetikzlibrary{topaths}
\usetikzlibrary{positioning}
\usetikzlibrary{decorations.pathmorphing}

\usepackage{bytefield}
\newcommand{\colorbitbox}[3]{%
\rlap{\bitbox{#2}{\color{#1}\rule{\width}{\height}}}%
\bitbox{#2}{#3}}
\newcommand{\memsection}[4]{
	\bytefieldsetup{bitheight=#3\baselineskip}	% define the height of the memsection
	\bitbox[]{8}{
		\texttt{0x\uppercase{#1}}	 % print end address
		\\ \vspace{#3\baselineskip} \vspace{-2\baselineskip} \vspace{-#3pt} % do some spacing
		\texttt{0x\uppercase{#2}} % print start address
	}
	\rlap{\bitbox{16}{\color{white}\rule{\width}{\height}}}%
\bitbox{16}{#4} % print box with caption
}

\newcommand*{\ByteWidht}{0.9cm}
\newcommand*{\ByteHeight}{0.6cm}

\tikzset{
  databox/.style={draw,fill=white,minimum width=#1*\ByteWidht, minimum height=\ByteHeight, path picture={%
    \foreach \x in {0,...,4}%
      \draw (path picture bounding box.south west) ++(\x*\ByteWidht,0) -- ++(0,0.15*\ByteHeight);%
    }},
  databox/.default=4,
  partleft/.style={minimum width=\ByteWidht, text width=0.6*\ByteWidht, minimum height=\ByteHeight, align=right,
    append after command={
      \pgfextra{%
        \draw [fill=lightgray]%
          ($(\tikzlastnode.south east) + (-0.65*\ByteWidht-0.5*\pgflinewidth,0.5*\pgflinewidth)$)
       -- ($(\tikzlastnode.south east) + (-0.5*\pgflinewidth,0.5*\pgflinewidth)$)
       -- ($(\tikzlastnode.north east) + (-0.5*\pgflinewidth,-0.5*\pgflinewidth)$) %
       -- ++(-0.65*\ByteWidht,0) %
       -- ++(0.125*\ByteWidht,-0.25*\ByteHeight)
       -- ++(-0.25*\ByteWidht,-0.50*\ByteHeight)
       -- cycle;
      }
    }
  },
  partright/.style={minimum width=\ByteWidht, text width=0.6*\ByteWidht, minimum height=\ByteHeight, align=left,
    append after command={
      \pgfextra{%
        \draw [fill=lightgray]%
          ($(\tikzlastnode.south west) + (0.65*\ByteWidht+0.5*\pgflinewidth,0.5*\pgflinewidth)$)
       -- ($(\tikzlastnode.south west) + (0.5*\pgflinewidth,0.5*\pgflinewidth)$)
       -- ($(\tikzlastnode.north west) + (0.5*\pgflinewidth,-0.5*\pgflinewidth)$) %
       -- ++(0.65*\ByteWidht,0) %
       -- ++(0.125*\ByteWidht,-0.25*\ByteHeight)
       -- ++(-0.25*\ByteWidht,-0.50*\ByteHeight)
       -- cycle;
      }
    }
  }
}

\begin{document}


\begin{frame}\frametitle{Основные элементы}
  \begin{columns}[T]
    \begin{column}[T]{5cm}
      \begin{block}{Байт}
        \begin{figure}
          \subfigure{\begin{tikzpicture}
\node[databox=1,text=blue] at (0,0) {'A'};
          \end{tikzpicture}}
          \subfigure{\begin{tikzpicture}
\node[databox=1, text=brown] at (0,0) {255};
          \end{tikzpicture}}
          \subfigure{\begin{tikzpicture}
\node[databox=1] at (0,0) {A0};
          \end{tikzpicture}}
        \end{figure}
      \end{block}
    \end{column}
    \begin{column}[T]{5cm}
      \begin{block}{Int32}
        \begin{figure}
          \subfigure{\begin{tikzpicture}
\node[databox=4,text=brown] at (0,0) {1234567890};
          \end{tikzpicture}}
        \end{figure}
      \end{block}
    \end{column}
  \end{columns}
  \begin{columns}[T]
    \begin{column}[T]{11cm}
      \begin{block}{Массив}
        \begin{figure}
          \subfigure{\begin{tikzpicture}
\foreach \x/\d in {0/{'H'}, 1/'e', 2/'l', 3/'l', 4/'o'}{
  \node[databox=1,text=blue] (tmp) at (\x*\ByteWidht,0) {\d};
  \node[text=green!80!black, below=0.03cm of tmp,scale=0.5] {\x};
}
\node[databox=1,text=brown] (tmp) at (5*\ByteWidht,0) {0};
\node[text=green!80!black, below=0.03cm of tmp,scale=0.5] {5};
          \end{tikzpicture}}
          \subfigure{\begin{tikzpicture}
\node[partleft] at (0,0) {...};
\begin{scope}[shift={(\ByteWidht,0)}]
\foreach \x/\d in {0/{'H'}, 1/'e', 2/'l', 3/'l', 4/'o'}{
  \node[databox=1,text=blue] (tmp) at (\x*\ByteWidht,0) {\d};
  \node[text=green!80!black, below=0.03cm of tmp,scale=0.5] {+\x};
}
\node[databox=1,text=brown] (tmp) at (5*\ByteWidht,0) {0};
\node[text=green!80!black, below=0.03cm of tmp,scale=0.5] {+5};
\end{scope}
\node[partright] at (7*\ByteWidht,0) {...};
          \end{tikzpicture}}
        \end{figure}
      \end{block}
    \end{column}
  \end{columns}
\end{frame}

\begin{frame}[fragile]\frametitle{Основные элементы}
      \begin{block}{Структура}
        \begin{figure}
          \subfigure{\begin{tikzpicture}%[scale=0.85, every node/.style={transform shape}]
\node[databox=4,text=brown] (id) {7172421}; \node[above=0 of id,text=magenta]{id};
\node[databox=1,right=-\pgflinewidth of id,text=blue] (a) {'A'}; \node[above=0 of a,text=magenta]{a};
\node[databox=1,right=-\pgflinewidth of a,text=blue] (b) {'B'}; \node[above=0 of b,text=magenta]{b};
\node[databox=2,right=-\pgflinewidth of b,text=blue, fill=lightgray] (none) {};
\node[databox=4,right=-\pgflinewidth of none,text=brown] (sum) {7172421};  \node[above=0 of sum,text=magenta]{sum};
          \end{tikzpicture}}
          \subfigure{\begin{tikzpicture}%[scale=0.95, every node/.style={transform shape}]
\node[partleft] (tmp) at (0,0) {...};
\node[databox=4,right=-\pgflinewidth of tmp,text=brown] (x) {x=421}; \node[above=0 of x,text=magenta]{x};
\node[databox=4,right=-\pgflinewidth of x,text=brown] (y) {y=123}; \node[above=0 of y,text=magenta]{y};
\node[partright,right=-\pgflinewidth of y] {...};
          \end{tikzpicture}}
        \end{figure}
      \end{block}
      \begin{block}{Сложная структура, например, битовая}
        \begin{figure}
\begin{bytefield}{32}
    \bitheader{0,3,4,7,8,15,16,18,19,31}\\
    \colorbitbox{white}{4}{\textcolor{magenta}{\scriptsize Version}} &
    \colorbitbox{white}{4}{\scriptsize \textcolor{magenta}{Header length}} &
    \colorbitbox{white}{8}{\scriptsize \textcolor{magenta}{Differentiated Services}} &
    \colorbitbox{white}{16}{\textcolor{magenta}{\scriptsize Total Length}}\\
    \colorbitbox{white}{16}{\textcolor{magenta}{\scriptsize Identification}} &
    \colorbitbox{white}{3}{\textcolor{magenta}{\scriptsize Flags}} &
    \colorbitbox{white}{13}{\textcolor{magenta}{\scriptsize Fragment Offset}}\\
    \colorbitbox{white}{8}{\textcolor{magenta}{\scriptsize Time to Live}} &
    \colorbitbox{white}{8}{\textcolor{magenta}{\scriptsize Protocol}} &
    \colorbitbox{white}{16}{\textcolor{magenta}{\scriptsize Header Checksum}}\\
    \end{bytefield}
        \end{figure}
      \end{block}
\end{frame}

\begin{frame}[fragile]\frametitle{Основные элементы}
      \begin{block}{Память, например, документация от Intel}
        \begin{figure}
\footnotesize{
\begin{bytefield}{24}
	\memsection{ffff ffff}{0040 0000}{6}{-- free --}\\
	\begin{rightwordgroup}{internal memory}
		\memsection{003f ffff}{002f c000}{4}{Special Function Registers}\\
		\memsection{002f bfff}{0007 0000}{3}{-- reseved --}\\
		\memsection{0006 ffff}{0000 0000}{6}{Internal Flash}
	\end{rightwordgroup}\\
\end{bytefield}
}
        \end{figure}
      \end{block}
\end{frame}
   
\begin{frame}\frametitle{Вызов подпрограммы}
  \begin{columns}[T]
    \begin{column}[T]{5cm}
      \begin{block}{}
        \begin{figure}\begin{tikzpicture}
\draw (0,0) rectangle (1,1);
\node[databox] at (0,0) {asd};
        \end{tikzpicture}\end{figure}
      \end{block}
      \begin{block}{}
        \begin{figure}\begin{tikzpicture}[thick,scale=0.4, every node/.style={scale=0.4}]
\draw [dashed] (1,12) -- (11,12);
\node[above] at (4,11) {1}; \node[above] at (8,11) {true};
       \end{tikzpicture}\end{figure}
      \end{block}
    \end{column}
  \end{columns}
\end{frame}

\end{document}
